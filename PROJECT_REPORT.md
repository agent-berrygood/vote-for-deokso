# 덕소교회 항존직 선거 시스템 - 개발 진행 보고서

**작성일**: 2026년 2월 11일
**작성자**: Antigravity (AI Assistant)
**프로젝트명**: Vote for Deokso (Next.js + Firebase)

---

## 1. 프로젝트 개요
본 프로젝트는 **덕소교회 항존직 선거**를 위한 온라인 투표 시스템 구축을 목표로 합니다.
관리자가 쉽고 안전하게 선거를 운영할 수 있는 **어드민 대시보드**와, 유권자가 간편하게 인증하고 투표할 수 있는 **모바일 최적화 투표 페이지**, 그리고 실시간 개표 현황을 보여주는 **결과 페이지**로 구성되어 있습니다.

## 2. 주요 구현 기능 (Completed Features)

### A. 어드민(관리자) 시스템
1.  **관리자 로그인 (보안 강화)**
    *   `/admin` 경로 접속 시 비밀번호 인증 요구.
    *   세션(Session) 기반 인증 유지로 비인가 접근 차단.
2.  **선거 데이터 관리 (Data Management)**
    *   **선거 생성 및 전환**: 여러 선거(예: `default-2026`, `test-v1`)를 생성하고 자유롭게 전환하며 관리 가능.
    *   **데이터 초기화(Reset)**: 'Danger Zone'을 통해 후보자 및 선거인 명부를 일괄 삭제하는 기능 (대용량 데이터 처리를 위한 Batch Logic 적용).
3.  **후보자 및 유권자 관리**
    *   **CSV 일괄 업로드**: 엑셀로 정리된 후보자/유권자 명단을 한 번에 등록.
    *   **중복 방지**: 이미 데이터가 존재할 경우 덮어쓰기 경고창 출력.
    *   **개별 유권자 추가**: 이름, 전화번호, 생년월일 입력 시 **인증번호 및 전화번호(대시 자동입력) 자동 생성**.

### B. 유권자 인증 및 투표 (Voter Auth)
1.  **2단계 본인 인증 프로세스**
    *   **1단계**: 이름, 전화번호, 생년월일(6자리)을 입력하여 선거인 명부와 대조.
    *   **2단계**: 일치 시 카카오 알림톡(Mock)으로 **7자리 인증번호** 발송 -> 입력 후 로그인.
2.  **카카오 알림톡 연동 (준비)**
    *   실제 발송을 위한 코드 구조(`src/lib/kakaoService.ts`, API Route) 설계 완료.
    *   현재는 화면상의 `Mock`(가상) 전송으로 동작하며, 비즈니스 채널 승인 후 즉시 전환 가능.

### C. 실시간 결과 페이지 (Results)
1.  **공개 개표 현황판**
    *   `/results` 페이지를 통해 로그인 없이 누구나 득표 현황 열람 가능.
    *   **차수별/직책별 필터링**: 1~5차 투표 및 장로/권사/안수집사별 집계 확인.
2.  **시각화 및 엑셀 다운로드**
    *   득표율 막대 그래프 및 1위 후보 강조(Crown Icon) UI 적용.
    *   현재 개표 결과를 **엑셀(CSV) 파일로 다운로드**하는 기능 제공.

---

## 3. 기술적 특이사항 (Technical Highlights)

*   **프레임워크**: Next.js 16 (App Router) + TypeScript
*   **데이터베이스**: Firebase Firestore (NoSQL)
*   **UI 라이브러리**: Material UI (MUI) - 모바일 반응형 디자인 적용
*   **안전한 데이터 처리**:
    *   대량의 데이터 삭제 시 `Firestore Batch` 제한(500개)을 우회하는 **Chunking Logic** 구현으로 안정성 확보.
    *   민감 정보(API Key, Password)는 `.env` 환경변수로 분리하여 보안성 강화.

---

## 4. 향후 계획 (Next Steps)

1.  **카카오 알림톡 실연동**
    *   [카카오 비즈니스 채널 승인] 및 [알리고/솔라피] 등 대행사 계약 완료 필요.
    *   완료 시 제공된 `KAKAO_INTEGRATION_GUIDE.md`에 따라 API Key만 입력하면 즉시 사용 가능.
2.  **실제 데이터 리허설**
    *   실제 선거인 명부(수천 명 단위)를 업로드하여 퍼포먼스 최종 점검.
3.  **배포 (Deployment)**
    *   Vercel을 통한 상용 배포 및 도메인 연결.

---
**비고**: 위 내용은 현재 시점(2026-02-11) 기준으로 개발 완료된 사항입니다.
